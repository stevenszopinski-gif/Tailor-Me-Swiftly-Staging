<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TailorMeSwiftly.com | Instant Resume Tailoring</title>
    <link rel="stylesheet" href="style.css?v=6">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7832382680038641"
        crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</head>

<body data-theme="dark">
    <!-- Background Elements -->
    <div class="bg-shape shape-1"></div>
    <div class="bg-shape shape-2"></div>
    <div class="bg-shape shape-3"></div>

    <div class="app-container">
        <!-- Header -->

        <header class="app-header">
            <div class="logo">
                <div class="logo-icon"><i class="fa-solid fa-clipboard"></i></div>
                <h1>TailorMeSwiftly.com</h1>
            </div>
            <div class="header-actions" style="display: flex; gap: 1rem; align-items: center;">
                <div id="user-profile" class="user-profile"
                    style="display: none; flex-direction: column; align-items: center; gap: 0.2rem; position: relative;">
                    <img id="user-avatar" src="" alt="Profile"
                        style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover; border: 2px solid var(--primary-color); cursor: pointer;"
                        onclick="document.getElementById('avatar-dropdown').classList.toggle('hidden')">
                    <span id="user-greeting" style="font-size:0.7rem;color:var(--text-secondary);white-space:nowrap;"></span>
                    <div id="avatar-dropdown" class="avatar-dropdown hidden">
                        <button class="dropdown-item" id="open-prefs">
                            <i class="fa-solid fa-sliders"></i> Preferences
                        </button>
                        <a href="updates.html" class="dropdown-item" style="text-decoration: none; color: inherit;">
                            <i class="fa-solid fa-bullhorn"></i> Release Notes
                        </a>
                        <a href="history.html" class="dropdown-item" style="text-decoration: none; color: inherit;">
                            <i class="fa-solid fa-clock-rotate-left"></i> Past Applications
                        </a>
                        <button class="dropdown-item theme-btn" id="theme-toggle">
                            <i class="fa-solid fa-moon"></i> Theme
                        </button>
                        <div style="height: 1px; background: var(--panel-border); margin: 0.3rem 0;"></div>
                        <button class="dropdown-item" id="logout-btn">
                            <i class="fa-solid fa-arrow-right-from-bracket"></i> Sign Out
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <main class="wizard-container glass-panel">

            <!-- BUILDER VIEW (Existing Wizard) -->
            <div id="view-builder" class="app-view active-view">
                <!-- Progress Bar -->
                <div class="wizard-progress">
                    <div class="step active" data-step="1">
                        <div class="step-num">1</div>
                        <div class="step-label">Resume</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="2">
                        <div class="step-num">2</div>
                        <div class="step-label">Target Role</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="3">
                        <div class="step-num">3</div>
                        <div class="step-label">Gaps</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="4">
                        <div class="step-num">4</div>
                        <div class="step-label">Tailor</div>
                    </div>
                </div>

                <div class="wizard-body">

                    <!-- STEP 1: Upload -->
                    <div id="step-1" class="wizard-step active-step">

                        <!-- New Workspace Header -->
                        <div class="workspace-header">
                            <div class="user-welcome">
                                <h2 id="welcome-message">Hello, Steven</h2>
                                <p>Ready to land your next role? Let's tailor your application.</p>
                            </div>
                        </div>

                        <div class="step-header" style="margin-top: 1rem;">
                            <h2>Start by uploading your resume</h2>
                            <p>We'll extract your core narrative while preserving the facts.</p>
                        </div>

                                <div class="upload-area" id="drop-zone">
                                    <input type="file" id="file-input" accept=".pdf,.docx,.txt" style="display: none;">
                                    <div class="upload-icon">
                                        <i class="fa-solid fa-cloud-arrow-up"></i>
                                    </div>
                                    <h3>Drag & drop your resume here</h3>
                                    <p>Supports PDF, DOCX, and TXT (Max 5MB)</p>
                                    <button type="button" class="btn secondary-btn"
                                        onclick="document.getElementById('file-input').click()">Browse Files</button>
                                </div>

                                <div class="divider"><span>OR PASTE MANUALLY</span></div>

                                <div style="text-align:center; margin-bottom:1.5rem;">
                                    <button type="button" class="btn ghost-btn"
                                        onclick="document.getElementById('manual-resume-wrap').classList.toggle('hidden')">
                                        <i class="fa-solid fa-keyboard"></i> Toggle Manual Paste
                                    </button>
                                </div>

                                <div id="manual-resume-wrap" class="hidden" style="margin-bottom:1.5rem;">
                                    <textarea id="manual-resume-input" class="manual-jd"
                                        style="width:100%; height:150px;"
                                        placeholder="Paste your resume text here..."></textarea>
                                </div>

                                <div id="file-status" class="file-status hidden">
                                    <div class="file-info">
                                        <i class="fa-solid fa-file-lines"></i>
                                        <span id="file-name">resume.pdf</span>
                                    </div>
                                    <div class="parse-status success" id="parse-status">
                                        <i class="fa-solid fa-check-circle"></i> Extracted
                                    </div>
                                </div>

                                <!-- Hidden text input for raw parsed text -->
                                <textarea id="base-resume" hidden></textarea>

                                <!-- Use Last Resume shortcut -->
                                <div id="use-last-resume-bar"
                                    style="display:none; margin-top:0.75rem; text-align:center;">
                                    <div
                                        style="background:var(--glass-bg); border:1px solid var(--panel-border); border-radius:12px; padding:0.85rem 1.25rem; display:flex; align-items:center; justify-content:space-between; gap:1rem; flex-wrap:wrap;">
                                        <div style="display:flex; align-items:center; gap:0.6rem; font-size:0.88rem;">
                                            <i class="fa-solid fa-clock-rotate-left"
                                                style="color:var(--primary-color);"></i>
                                            <span>Use your last uploaded resume: <strong id="last-resume-name"
                                                    style="color:var(--text-primary);">–</strong></span>
                                        </div>
                                        <button id="use-last-resume-btn" class="btn small-btn primary-btn">
                                            <i class="fa-solid fa-bolt"></i> Use This
                                        </button>
                                    </div>
                                </div>

                        <div class="step-actions right">
                            <button id="next-to-2" class="btn primary-btn" disabled>Next Step <i
                                    class="fa-solid fa-arrow-right"></i></button>
                        </div>
                    </div>

                    <!-- STEP 2: Job JD URL -->
                    <div id="step-2" class="wizard-step">
                        <div class="step-header">
                            <h2>Target Job Description</h2>
                            <p>Provide the URL of the role you want to apply to</p>
                        </div>

                        <div class="url-input-group">
                            <div class="input-with-icon" style="flex: 1;">
                                <i class="fa-solid fa-link"></i>
                                <input type="url" id="job-url" placeholder="https://linkedin.com/jobs/view/...">
                            </div>
                        </div>

                        <div id="url-status" class="url-status message-area"></div>

                        <div class="divider"><span>OR PASTE MANUALLY</span></div>

                        <textarea id="job-description" class="manual-jd"
                            placeholder="If the URL fails to parse, paste the job description text here..."></textarea>

                        <div class="step-actions between">
                            <button id="back-to-1" class="btn ghost-btn"><i class="fa-solid fa-arrow-left"></i>
                                Back</button>
                            <button id="next-to-3" class="btn primary-btn" disabled>Continue to Gaps Assistant <i
                                    class="fa-solid fa-arrow-right"></i></button>
                        </div>
                    </div>

                    <!-- STEP 3: Gaps Assistant -->
                    <div id="step-3" class="wizard-step hidden">
                        <div class="step-header">
                            <div class="step-icon"><i class="fa-solid fa-magnifying-glass-chart"></i></div>
                            <h2>Gaps Assistant</h2>
                            <p>We analyze the job description and surface skills that are missing from your resume.</p>
                        </div>

                        <div class="step-header" style="margin-top: 1.5rem; text-align: center;">
                            <h3 style="font-size: 1.1rem; color: var(--text-primary); margin-bottom: 0.5rem;">Missing
                                Skills Found</h3>
                            <p style="font-size: 0.9rem;">Select the skills you possess but aren't explicitly listed in
                                your resume. We'll weave them in.</p>
                        </div>

                        <div id="missing-skills-container"
                            style="background: rgba(0,0,0,0.1); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; border: 1px solid var(--panel-border);">
                            <div id="missing-skills-loading"
                                style="text-align:center; color: var(--text-secondary); font-size: 0.9rem;">
                                <i class="fa-solid fa-spinner fa-spin"></i> Analyzing Job Description for gaps...
                            </div>
                            <div id="missing-skills-list" class="keyword-badges"
                                style="display:none; justify-content: center; gap: 0.8rem;">
                                <!-- Populated by JS -->
                            </div>
                            <p id="missing-skills-error" class="error-text"
                                style="display:none; text-align:center; margin:0; font-size: 0.85rem;"></p>
                        </div>

                        <div class="step-actions split">
                            <button id="back-to-2" class="btn ghost-btn"><i class="fa-solid fa-arrow-left"></i>
                                Back</button>
                            <button id="next-to-4" class="btn primary-btn">Finalize & Tailor <i
                                    class="fa-solid fa-wand-magic-sparkles"></i></button>
                        </div>
                    </div>

                    <div id="step-4" class="wizard-step hidden">
                        <!-- Loading UI moved to bottom of body to ensure fixed positioning centers over viewport -->
                    </div>
                </div> <!-- End of BUILDER VIEW -->



                <!-- PREFERENCES MODAL -->
                <div id="prefs-modal" class="modal">
                    <div class="modal-content" style="max-width: 560px;">
                        <div class="modal-header">
                            <h3><i class="fa-solid fa-sliders"></i> Preferences</h3>
                            <span id="close-prefs" class="close">&times;</span>
                        </div>
                        <div class="modal-body">
                            <p class="field-label">Custom Tailoring Instructions</p>
                            <textarea id="user-prefs-input"
                                placeholder="E.g. Use British English, keep it strictly under 1 page, focus on leadership, use a professional but friendly tone..."></textarea>
                            <p class="helper-text">These instructions will be applied to every document we generate
                                for
                                you.</p>
                            <button id="save-prefs" class="btn primary-btn"
                                style="width: 100%; margin-top: 1rem;">Save
                                Preferences</button>
                        </div>
                    </div>
                </div>

                <!-- LinkedIn About Modal -->
                <div id="linkedin-modal" class="modal">
                    <div class="modal-content glass-panel" style="max-width: 560px;">
                        <div class="modal-header">
                            <h3><i class="fa-brands fa-linkedin" style="color: #0077b5;"></i> LinkedIn About Section
                            </h3>
                            <span id="close-linkedin" class="close">&times;</span>
                        </div>
                        <div class="modal-body">
                            <p class="helper-text" style="margin-bottom: 1rem;">A polished 300-word About section
                                distilled from
                                your tailored resume.</p>
                            <div id="linkedin-output" class="rich-output-area" contenteditable="true"
                                style="min-height: 200px; font-size: 0.95rem; line-height: 1.7;"
                                data-placeholder="Generating your LinkedIn About section..."></div>
                            <button id="copy-linkedin-btn" class="btn primary-btn"
                                style="width: 100%; margin-top: 1rem;">
                                <i class="fa-regular fa-copy"></i> Copy to Clipboard
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Share Toast -->
                <div id="share-toast" class="share-toast hidden">
                    <i class="fa-solid fa-check-circle"></i> Link copied to clipboard!
                </div>



                <!-- Site Footer -->
                <footer class="site-footer">
                    <p>&copy; 2026 TailorMeSwiftly.com. This service is free to use and supported by advertising.</p>
                    <p><a href="terms.html">Terms & Conditions</a> | <a href="privacy.html">Privacy Policy</a></p>
                </footer>

                <!-- Scripts -->
                <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.38.0"></script>

                <!-- Parser Libraries -->
                <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
                <script>
                    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
                </script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

                <script src="auth.js?v=6"></script>
                <script src="app.js?v=6"></script>

                <!-- Full viewport overlay -->
                <div id="loading-overlay" class="hidden">
                    <div class="resume-anim-wrap" style="transform: scale(1.1);">
                        <div class="resume-doc">
                            <div class="rdoc-header">
                                <div class="rdoc-avatar"></div>
                                <div class="rdoc-title-lines">
                                    <div class="rdoc-line rdoc-line-name"></div>
                                    <div class="rdoc-line rdoc-line-sub"></div>
                                </div>
                            </div>
                            <div class="rdoc-section-label"></div>
                            <div class="rdoc-line rdoc-body-line" style="--d:0.1s;--w:95%"></div>
                            <div class="rdoc-line rdoc-body-line" style="--d:0.3s;--w:88%"></div>
                            <div class="rdoc-line rdoc-body-line" style="--d:0.5s;--w:72%"></div>
                            <div class="rdoc-section-label" style="--d2:0.7s;margin-top:10px"></div>
                            <div class="rdoc-line rdoc-body-line" style="--d:0.9s;--w:90%"></div>
                            <div class="rdoc-line rdoc-body-line" style="--d:1.1s;--w:65%"></div>
                            <span class="rdoc-cursor"></span>
                        </div>
                        <div class="sparkle sp1">✦</div>
                        <div class="sparkle sp2">✦</div>
                    </div>

                    <h3 id="loading-title" style="margin-top: 1rem;"></h3>
                    <p id="loading-estimate" style="color: var(--text-secondary); display: none;"></p>
                    <div id="did-you-know-box" style="margin-top: 1.5rem; max-width: 480px; text-align: center;">
                        <span style="display: inline-block; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; color: var(--primary-color); margin-bottom: 0.4rem;">Did you know?</span>
                        <p id="funny-quote"
                            style="color: var(--text-secondary); min-height: 1.5rem; opacity: 1; transition: opacity 0.5s ease-in-out; font-size: 0.9rem; line-height: 1.5; margin: 0;">
                        </p>
                    </div>

                    <div id="generation-status" class="status-message">
                    </div>

                    <div id="generation-control" class="hidden" style="margin-top: 1rem;">
                        <!-- Injected on error -->
                    </div>
                </div>
            </div>

</body>

</html>